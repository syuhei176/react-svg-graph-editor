{"version":3,"sources":["components/node.js"],"names":["DRAG_NONE","DRAG_MOVE","Node","props","state","x","node","y","nodeState","hideChildren","console","log","e","offset","pageX","pageY","setState","dragMode","currentPos","dd","sub","onMoved","setPos","item","onClick","onEvalClicked","width","height","edges","depth","stroke","children","text","evaluatable","hiddable","absolutlyPos","getAPos","showAbsolutlyPosition","transform","bind","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseUp","Component"],"mappings":"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","file":"node.js","sourcesContent":["import React from 'react'\nimport Point2D from 'point2d'\nimport CSText from './text'\n\nconst DRAG_NONE = 0;\nconst DRAG_MOVE = 1;\n\nexport default class Node extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tx: props.node.x,\n\t\t\ty: props.node.y,\n\t\t\tnodeState:{},\n\t\t\thideChildren: false\n\t\t}\n\t}\n\n\tonClick() {\n\t\tconsole.log('click');\n\t}\n\n\tonMouseDown(e) {\n\t\tconsole.log('onMouseDown');\n\t\tthis.offset = new Point2D(e.pageX-this.state.x, e.pageY-this.state.y);\n\t\tthis.setState({\n\t\t  dragMode: DRAG_MOVE\n\t\t});\n\t\t//selectorAction.select(this.props.id);\n\t}\n\n\tonMouseMove(e) {\n\t\tif(this.state.dragMode == DRAG_MOVE) {\n\t\t\t//console.log( this.offset );\n\t\t\tvar currentPos = new Point2D(e.pageX, e.pageY);\n\t\t\tvar dd = currentPos.sub(this.offset);\n\t\t\t//console.log(dd);\n\t\t\tif(this.props.onMoved) {\n\t\t\t\tthis.props.onMoved(dd);\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tx: dd.x,\n\t\t\t\ty: dd.y\n\t\t\t});\n\t\t\tthis.props.node.setPos(dd.x, dd.y)\n\t\t}\n\n\t}\n\n\tonMouseUp(e) {\n\t\tif(this.state.dragMode == DRAG_MOVE) {\n\t\t}\n\t\tthis.state.dragMode = DRAG_NONE;\n\t}\n\n\tonMouseEnter() {\n\t}\n\n\tonMouseLeave() {\n\t\tthis.state.dragMode = DRAG_NONE;\n\t}\n\n\tonFocus() {\n\t\tif(this.props.item.onClick) this.props.item.onClick();\n\t}\n\n\tonShowClicked() {\n\t\tif(this.state.hideChildren) {\n\t\t\tthis.setState({\n\t\t\t\thideChildren: false\n\t\t\t});\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\thideChildren: true\n\t\t\t});\n\t\t}\n\t}\n\n\tonEvalClicked() {\n\t\tif(this.props.item.onEvalClicked) this.props.item.onEvalClicked();\n\t}\n\n\trender() {\n\t\tlet {width, height, node, edges, depth, stroke, children} = this.props;\n\t\tlet text = '';\n\t\tlet evaluatable = false, hiddable = false;\n\t\tlet absolutlyPos = node.getAPos();\n\t\tlet showAbsolutlyPosition = false;\n\n\t\tlet transform = \"translate(\"+(this.state.x)+\",\"+(this.state.y)+\")\";\n\t\treturn (<g transform={transform}>\n\t\t\t{edges}\n\t\t\t<rect width={width} height={height} style={{\"fill\":\"rgb(255,255,250)\",\"strokeWidth\":1,\"stroke\":stroke||\"rgb(0,0,0)\"}}></rect>\n\t\t\t<rect onClick={this.onClick.bind(this)}\n\t      \t\tonMouseDown={this.onMouseDown.bind(this)}\n\t      \t\tonMouseEnter={this.onMouseEnter.bind(this)}\n\t      \t\tonMouseLeave={this.onMouseLeave.bind(this)}\n\t      \t\tonMouseMove={this.onMouseMove.bind(this)}\n\t      \t\tonMouseUp={this.onMouseUp.bind(this)}\n\t      \t\twidth={width} height={height} style={{\"opacity\":0}} ></rect>\n\t      \t\t{showAbsolutlyPosition?(<text>{`(${absolutlyPos.x}, ${absolutlyPos.y})`}</text>):<div/>}\n\t      \t{children}\n\t      </g>)\n\t}\n}\n\n/*\n\n\t  \t\t{!!item.graph?(<g>\n\t\t      <rect x=\"0\" y=\"0\" width=\"60\" height=\"20\" style={{\"fill\":\"#55e760\",\"stroke\":\"#111\",\"strokeWidth\":1}} onClick={this.onFocus.bind(this)}></rect>\n\t\t      <text x=\"6\" y=\"17\" fill=\"#fff\" style={{\"fontSize\":\"12px\"}} onClick={this.onFocus.bind(this)}>Focus</text>\n\t\t      </g>):(<div/>)}\n\t  \t\t\t<g>\n\t\t      \t\t<rect x=\"0\" y=\"20\" width=\"60\" height=\"20\" style={{\"fill\":\"#5a60ef\",\"stroke\":\"#111\",\"strokeWidth\":1}} onClick={this.onSend.bind(this)}></rect>\n\t\t      \t\t<text x=\"6\" y=\"37\" fill=\"#fff\" style={{\"fontSize\":\"12px\"}} onClick={this.onSend.bind(this)}>Send</text>\n\t\t      \t</g>\n\n*/"]}